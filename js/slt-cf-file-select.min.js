var select_button,parent_src_vars;select_button='<a href="#" class="slt-cf-fs-insert button-secondary">'+slt_cf_file_select.text_select_file+"</a>";jQuery(document).ready(function(b){var d=b(".slt-cf-fs-button");d.on("click",function(h){h.preventDefault();var f=b(this);var g;b("html").addClass("File");g="media-upload.php?slt_cf_fs_field="+f.siblings("input.slt-cf-fs-value").attr("id").trim()+"&type=file";if(f.siblings("input.slt-cf-fs-attach-to-post").attr("value")=="1"&&f.parents("form").find("input[name=post_ID]").length){g+="&post_id="+f.parents("form").find("input[name=post_ID]").attr("value")}g+="&TB_iframe=true";tb_show("",g)});d.filter(":first").parents("form").on("submit",function(){b(".slt-cf-fs-remove:checked").each(function(){b(this).siblings("input.slt-cf-fs-value").val("")})});if(slt_fs_media_overlay()){var c=b("ul#sidemenu");var a=c.find("a.current").parent("li").attr("id");b("li#tab-type_url",c).remove();b("p.ml-submit").remove();switch(a){case"tab-type":slt_fs_media_item_interface();break;case"tab-gallery":case"tab-library":b("#sort-buttons > span,th.order-head,#media-items .media-item div.menu_order,#media-items .media-item a.toggle, #gallery-settings").remove();b(".media-item","#media-items").each(function(){b(this).prepend(select_button)});b("a.slt-cf-fs-insert").css({display:"block","float":"right",margin:"7px 20px 0 0"});break}b("body").on("click","a.slt-cf-fs-insert",function(h){h.preventDefault();var g=b(this);var f;if(g.parent().attr("class")=="savesend"){f=g.siblings(".del-attachment").attr("id");f=f.match(/del_attachment_([0-9]+)/);f=f[1]}else{f=g.parent().attr("id");f=f.match(/media\-item\-([0-9]+)/);f=f[1]}parent.slt_cf_fs_select_item(f,parent_src_vars.slt_cf_fs_field)});b(document).ajaxComplete(function(){slt_fs_media_item_interface()})}});function slt_fs_media_item_interface(){jQuery(function(c){var d=c("table.describe tr.submit td.savesend");var a=c("tr.submit td.savesend",d);var b=a.find("input");c("tbody tr:not(.submit), a.wp-post-thumbnail",d).remove();if(b.length){b.replaceWith(select_button)}else{a.prepend(select_button)}c('input[value="Edit Image"]',d).parent("p").remove()})}function slt_fs_media_overlay(){var a=false;if(jQuery("body").attr("id")=="media-upload"){parent.jQuery("iframe").each(function(b,c){if(c.contentWindow===window&&jQuery(c).attr("id")=="TB_iframeContent"){parent_src_vars=slt_fs_get_url_vars(parent.document.getElementById("TB_iframeContent").src);if("slt_cf_fs_field" in parent_src_vars){a=true}}})}return a}function slt_fs_get_url_vars(a){var c={};var b=a.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(d,e,f){c[e]=f});return c}function slt_fs_new_upload_button(c){var d,a,b;if(slt_fs_media_overlay()){jQuery(function(e){d=e("#slt-cf-new-upload-button-"+c).parents("table");a=d.find("tr.submit td.savesend");b=a.find("input");d.find("tbody tr:not(.submit), a.wp-post-thumbnail").remove();d.find('input[type=button][value="Edit Image"]').remove();if(b.length){b.replaceWith(select_button)}else{a.prepend(select_button)}})}}function slt_cf_fs_select_item(a,b){var d,e,c;jQuery(function(f){d=f("#"+b);e=f("#"+b+"_preview");c=f("#"+b+"_preview-size").val();e.html("").load(slt_cf_file_select.ajaxurl,{id:a,size:c,action:"slt_cf_fs_get_file"});d.val(a);tb_remove();f("html").removeClass("File")})};