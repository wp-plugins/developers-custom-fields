jQuery(document).ready(function($){if($(".slt-cf-fs-button").length){$(".slt-cf-fs-button").click(function(){var upload_url;$("html").addClass("File");upload_url="media-upload.php?slt_cf_fs_field="+$(this).siblings("input.slt-cf-fs-value").attr("id")+"&type=file";if($(this).siblings("input.slt-cf-fs-attach-to-post").attr("value")=="1"&&$(this).parents("form").find("input[name=post_ID]").length){upload_url+="&post_id="+$(this).parents("form").find("input[name=post_ID]").attr("value")}upload_url+="&TB_iframe=true";tb_show("",upload_url);return false});$(".slt-cf-fs-button:first").parents("form").submit(function(){$(".slt-cf-fs-remove:checked").each(function(){$(this).siblings("input.slt-cf-fs-value").val("")})})}if($("body").attr("id")=="media-upload"){var parent_doc,parent_src,parent_src_vars,current_tab,select_button;select_button='<a href="#" class="slt-cf-fs-insert button-secondary">'+slt_cf_file_select.text_select_file+"</a>";parent_doc=parent.document;parent_src=parent_doc.getElementById("TB_iframeContent").src;parent_src_vars=slt_fs_get_url_vars(parent_src);if("slt_cf_fs_field" in parent_src_vars){current_tab=$("ul#sidemenu a.current").parent("li").attr("id");$("ul#sidemenu li#tab-type_url").remove();$("p.ml-submit").remove();switch(current_tab){case"tab-type":$("table.describe tbody tr:not(.submit), a.wp-post-thumbnail").remove();if($("table.describe tr.submit td.savesend input").length){$("table.describe tr.submit td.savesend input").replaceWith(select_button)}else{$("table.describe tr.submit td.savesend").prepend(select_button)}break;case"tab-gallery":case"tab-library":$("#sort-buttons > span,th.order-head,#media-items .media-item div.menu_order,#media-items .media-item a.toggle, #gallery-settings").remove();$("#media-items .media-item").each(function(){$(this).prepend(select_button)});$("a.slt-cf-fs-insert").css({display:"block","float":"right",margin:"7px 20px 0 0"});break}$("a.slt-cf-fs-insert").click(function(){var item_id;if($(this).parent().attr("class")=="savesend"){item_id=$(this).siblings(".del-attachment").attr("id");item_id=item_id.match(/del_attachment_([0-9]+)/);item_id=item_id[1]}else{item_id=$(this).parent().attr("id");item_id=item_id.match(/media\-item\-([0-9]+)/);item_id=item_id[1]}parent.slt_cf_fs_select_item(item_id,parent_src_vars.slt_cf_fs_field);return false})}}});function slt_fs_get_url_vars(s){var vars,parts;vars={};parts=s.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(m,key,value){vars[key]=value});return vars}function slt_cf_fs_select_item(item_id,field_id){var field,preview_div,preview_size;jQuery(function($){field=$("#"+field_id);preview_div=$("#"+field_id+"_preview");preview_size=$("#"+field_id+"_preview-size").val();preview_div.html("").load(slt_cf_file_select.ajaxurl,{id:item_id,size:preview_size,action:"slt_cf_fs_get_file"});field.val(item_id);tb_remove();$("html").removeClass("File")})};