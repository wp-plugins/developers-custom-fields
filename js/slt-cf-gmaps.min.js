var slt_cf_maps=[];function write_markers(b){var c="";for(var a in slt_cf_maps[b].markers){if(slt_cf_maps[b].markers.hasOwnProperty(a)){c+=slt_cf_maps[b].markers[a]}}c=c.replace(/\)\(/g,"|").replace(/\(/g,"").replace(/\)/g,"").replace(/ /g,"");document.getElementById(b+"_map_markers").value=c}function add_marker(c,b){var a;if(slt_cf_maps[c].map._slt_cf_input_map===false){a=new google.maps.Marker({map:slt_cf_maps[c].map,position:b})}else{a=new google.maps.Marker({draggable:true,map:slt_cf_maps[c].map,position:b,title:"Drag to move, click to delete"});slt_cf_maps[c].marker_total++;a.id=slt_cf_maps[c].marker_total;slt_cf_maps[c].markers[a.id]=a.position.toString();write_markers(c);google.maps.event.addListener(a,"click",function(){delete slt_cf_maps[c].markers[a.id];this.setMap(null);write_markers(c)});google.maps.event.addListener(a,"dragend",function(d){slt_cf_maps[c].markers[a.id]=d.latLng.toString();write_markers(c)})}}function slt_cf_gmap_init(f,m,i,b,h,c,g,p){if(g==="hybrid"){g=google.maps.MapTypeId.HYBRID}else{if(g==="satellite"){g=google.maps.MapTypeId.SATELLITE}else{if(g==="terrain"){g=google.maps.MapTypeId.TERRAIN}else{g=google.maps.MapTypeId.ROADMAP}}}h=h.replace(" ","");h=h.split(",");h=new google.maps.LatLng(h[0],h[1]);var l={center:h,mapTypeId:g,scrollwheel:false,zoom:c};slt_cf_maps[f]=[];slt_cf_maps[f].map=new google.maps.Map(document.getElementById(f),l);slt_cf_maps[f].map._slt_cf_mapname=f;if(m==="input"){slt_cf_maps[f].map._slt_cf_input_map=true}else{slt_cf_maps[f].map._slt_cf_input_map=false}if(i){slt_cf_maps[f].markers=[];slt_cf_maps[f].marker_total=0;if(!b instanceof Array){b=[b]}if(b.length>0){for(var o in b){if(b.hasOwnProperty(o)){var k=b[o].split(",");k=new google.maps.LatLng(k[0],k[1]);add_marker(f,k)}}}if(m==="input"){slt_cf_maps[f].doubleClick=false;google.maps.event.addListener(slt_cf_maps[f].map,"dblclick",function(){slt_cf_maps[f].doubleClick=true;window.setTimeout(function(){slt_cf_maps[f].doubleClick=false},250)});google.maps.event.addListener(slt_cf_maps[f].map,"click",function(q){window.setTimeout(function(){if(!slt_cf_maps[f].doubleClick){add_marker(f,q.latLng)}},250)})}}if(m==="input"){google.maps.event.addListener(slt_cf_maps[f].map,"bounds_changed",function(){document.getElementById(this._slt_cf_mapname+"_zoom").value=this.getZoom();document.getElementById(this._slt_cf_mapname+"_centre_latlng").value=this.getCenter().toString().slice(1,-1).replace(" ","");document.getElementById(this._slt_cf_mapname+"_bounds_sw").value=this.getBounds().getSouthWest().toString().slice(1,-1).replace(" ","");document.getElementById(this._slt_cf_mapname+"_bounds_ne").value=this.getBounds().getNorthEast().toString().slice(1,-1).replace(" ","")});if(jQuery().autocomplete){var e=new google.maps.Geocoder();var d=jQuery("#"+f+"_bounds_sw").val().split(",");var n=jQuery("#"+f+"_bounds_ne").val().split(",");var a=new google.maps.LatLng(d[0],d[1]);var j=new google.maps.LatLng(n[0],n[1]);slt_cf_maps[f].map.geocodeBounds=new google.maps.LatLngBounds(a,j);jQuery(document).ready(function(r){var s="";if(document.createElement("input").placeholder!=="undefined"){s="screen-reader-text"}var q="";if(i){q="<small>Click on the map to add a marker. Click a marker to remove it. Click and drag a marker to change its location.<br><br></small>"}r("#"+f).after('<p class="gmap-address">'+q+'<label for="'+f+'_address" class="'+s+'">'+slt_cf_gmaps.geocoder_label+':</label><input type="text" id="'+f+'_address" name="'+f+'_address" value="" class="regular-text" style="width:100%;" placeholder="Find an address" /></p>');r("#"+f+"_address").autocomplete({source:function(u,t){e.geocode({address:u.term,bounds:slt_cf_maps[f].map.getBounds()},function(w,v){if(v===google.maps.GeocoderStatus.OK){t(r.map(w,function(x){return{label:x.formatted_address,value:x.formatted_address,latitude:x.geometry.location.lat(),longitude:x.geometry.location.lng()}}))}else{console.log("Geocode was not successful for the following reason: "+v)}})},select:function(t,v){var u=new google.maps.LatLng(v.item.latitude,v.item.longitude);slt_cf_maps[f].map.panTo(u);if(i){add_marker(f,u)}}})})}}if(typeof p!=="undefined"&&window[p]){window[p](slt_cf_maps[f].map)}}jQuery(document).ready(function(a){if(a("div.gmap_input").length){a("div.gmap_input").each(function(){var c,b;c=a(this).attr("id");if(a("input.gmap_toggle_display").length){a("input.gmap_toggle_display").change(function(){if(a(this).hasClass("yes")){a("#"+c+"_wrapper").slideDown("fast",function(){b=slt_cf_maps[c].map.getCenter();google.maps.event.trigger(slt_cf_maps[c].map,"resize");slt_cf_maps[c].map.setCenter(b)})}else{a("#"+c+"_wrapper").slideUp()}})}})}});