jQuery(document).ready(function(c){var b=[];var a=wp.media.model.settings.post.id;c(document.body).on("click.sltcfOpenMediaManager",".slt-cf-fs-button",function(k){k.preventDefault();var h=c(this);var f=h.siblings(".slt-cf-fs-value");var i=h.attr("id").split("_").slice(0,-1).join("_");var g=true;var j="Select file";var d="";if(typeof slt_cf_media["attach_to_post__"+i]!="undefined"){g=(slt_cf_media["attach_to_post__"+i]=="yes")}if(typeof slt_cf_media["dialog_title__"+i]!="undefined"){j=slt_cf_media["dialog_title__"+i]}if(typeof slt_cf_media["restrict_to_type__"+i]!="undefined"){d=slt_cf_media["restrict_to_type__"+i]}if(b[i]){if(!g){b[i].uploader.uploader.param("post_id",0)}else{b[i].uploader.uploader.param("post_id",a)}b[i].open();return}else{if(!g){wp.media.model.settings.post.id=0}else{wp.media.model.settings.post.id=a}}b[i]=wp.media.frames.slt_cf_media_frame=wp.media({className:"media-frame slt-cf-media-frame",frame:"select",multiple:false,title:j,library:{type:d}});b[i].on("select",function(){var m,l;var e=b[i].state().get("selection").first().toJSON();f.val(e.id);m=c("#"+i+"_preview");l=c("#"+i+"_preview-size").val();m.html("").load(slt_cf_media.ajaxurl,{id:e.id,size:l,action:"slt_cf_fs_get_file"})});b[i].open()})});